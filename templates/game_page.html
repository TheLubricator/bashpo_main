<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Buyer Game Page</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                },
            },
        };
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@1.4.7/dist/flowbite.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&family=Manrope:wght@200..800&display=swap"

        rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400&display=swap" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css2?family=Istok+Web&display=swap" rel="stylesheet">

</head>

<body class="font-inter">
    <header
        class="flex flex-col lg:flex-row items-start lg:items-center justify-between g-2 p-4 bg-base-100 rounded-lg">
        <div class="flex items-center justify-start">
            <div class="ml-5 lg:ml-20 mt-2 px-0.5 py-0.5 w-[80px] lg:w-[120px] h-[60px] relative">
                <div
                    class="absolute inset-0 bg-gradient-to-r from-sky-700 via-purple-400 to-violet-700 rounded-xl p-[2px]">
                </div>
                <a href="/">
                    <img src="{{ url_for('static', filename='img/logo.jpg') }}" alt="Logo"
                        class="rounded-lg relative z-10">
                </a>
            </div>
        </div>

        <div class="mt-3 lg:mt-0 lg:mr-5">
            <select id="user-name" name="user_name"
                class="block rounded-lg w-full lg:w-[200px] h-[40px] bg-gradient-to-r from-[#515151] to-[#676161] text-[#1A97F0] font-bold focus:ring-2 focus:ring-white focus:text-black appearance-none"
                onchange="handleDropdownChange(this)" required>
                <option value="" disabled selected 
                    class="bg-gradient-to-r from-[#515151] to-[#676161] text-[#1A97F0] text-center font-bold">
                    {{ buyer_username }} {{ balance }} $ 
                </option>
                <option value="view_profile" class="bg-[#b3b3b3] text-white">View My Profile</option>
                <option value="AddMonitorWallet" class="bg-[#b3b3b3] text-white">Add and Monitor Wallet</option>
                <option value="update_pass" class="bg-[#b3b3b3] text-white">Update Password</option>
                <option value="logout" class="bg-[#b3b3b3] text-white">Logout</option>
            </select>
        </div>
    </header>

    <section class="relative mt-5 bg-[url('{{ url_for('static', filename='img/featured_bg.jpeg') }}')] bg-cover bg-center w-full h-auto flex flex-col gap-5">
        <div class="absolute inset-0 bg-gradient-to-b from-[#1B446D] to-[#1B4460] opacity-70"></div>

        <div class="relative z-10 flex flex-col justify-center gap-4 text-center text-white mt-10">
            <div class="absolute right-0 top-0 flex flex-col gap-4 p-2 items-end mr-5">
                <div class="flex flex-row gap-4">
                    <a href="publication_req.html">
                        <button type="button"
                            class="w-full lg:w-[200px] h-[45px] font-bold bg-gradient-to-r from-[#2B983F] to-[#115C1E] text-white rounded-lg">
                            View Cart
                        </button>
                    </a>
                    <a href="act_buyer_lst.html">
                        <button type="button"
                            class="w-full lg:w-[200px] h-[45px] font-bold bg-gradient-to-r from-[#3E7C9B] to-[#4E6C9F] text-white rounded-lg">
                            WishList({{wishlist_value}})
                        </button>
                    </a>
                </div>
                <form class="w-full max-w-md">
                    <label for="default-search"
                        class="mb-2 text-sm font-medium text-gray-900 sr-only dark:text-white">Search</label>
                    <div class="relative">
                        <div class="absolute inset-y-0 left-3 flex items-center pointer-events-none">
                            <svg class="w-4 h-4 text-gray-500 dark:text-gray-400" aria-hidden="true"
                                xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"
                                    stroke-width="2" d="m19 19-4-4m0-7A7 7 0 1 1 1 8a7 7 0 0 1 14 0Z" />
                            </svg>
                        </div>
                        <input type="search" id="default-search"
                            class="block w-full p-4 pl-10 text-sm text-gray-900 border border-gray-300 rounded-lg bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500"
                            placeholder="Search for Games" required />
                        <button type="submit"
                            class="text-white absolute right-2.5 bottom-2.5 bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-4 py-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">
                            Search
                        </button>
                    </div>
                </form>
            </div>
            <div>

            </div>
                
            <div class="h-auto flex flex-row justify-center items-start gap-5 mt-[10rem]">
                
                <!-- Carousel Container -->
                <div id="default-carousel" class="relative w-[80%] max-w-4xl" data-carousel="slide">
                    <div class="relative lg:h-[430px] overflow-hidden rounded-lg">
                        <div class="hidden duration-1000 ease-in-out" data-carousel-item>
                            <a href="">
                                <img src="{{ url_for('static', filename=game_info[11]) }}" class="absolute block w-full h-full object-cover" alt="Slide 1">
                            </a>
                        </div>
                        <div class="hidden duration-1000 ease-in-out" data-carousel-item>
                            <a href="">
                                <img src="{{ url_for('static', filename=game_info[12]) }}"
                                    class="absolute block w-full h-full object-cover" alt="Slide 2">
                            </a>
                        </div>
                        
                    </div>
                </div>

                <div class="w-[20%] flex flex-col justify-between gap-5">
                    <div>
                        <a href="">
                            <img src="{{ url_for('static', filename=game_info[10]) }}"alt="" class="w-full h-[130px] rounded-lg object-cover">
                        </a>
                    </div>
                    <div>
                        <h1 class="h-[130px] w-full bg-gradient-to-r from-[#182074] via-[rgba(45,60,218,0.13)] to-[rgba(45,60,218,0.85)] text-white font-regular rounded-lg flex justify-center items-center">
                            {{game_info[2]}}
                        </h1>
                    </div>
                    
                    <div>
                        <h1 class="h-[130px] w-full bg-gradient-to-r from-[#182074] via-[rgba(45,60,218,0.13)] to-[rgba(45,60,218,0.85)] text-white font-[Inter] text-[14px] rounded-lg text-start px-4 py-2">
                            <p>
                                <span class="text-[#ACA4A4]">Genre:</span>
                                <span class="text-white font-normal">{{game_info[1]}}</span>
                            </p>
                            <p>
                                <span class="text-[#ACA4A4]">Rating:</span>
                                <span class="text-white font-normal">{{rating}}</span>
                            </p>
                            <p>
                                <span class="text-[#ACA4A4]">Release Year:</span>
                                <span class="text-white font-normal">{{game_info[18]}}</span>
                            </p>
                            <p>
                                <span class="text-[#ACA4A4]">Developer:</span>
                                <span class="text-white font-normal">{{game_info[5]}}</span>
                            </p>
                            <p>
                                <span class="text-[#ACA4A4]">Publisher name:</span>
                                <span class="text-white font-normal">{{publisher_name}}</span>
                            </p>
                        </h1>
                    </div>
                    
                </div>
            </div>
        </div>
        <div class="relative flex flex-row gap-4 ml-[19rem] gap-4 p-2">
            <a href="">
                <button type="button"
                    class="w-full lg:w-[200px] h-[45px] font-bold bg-gradient-to-r from-[#4C7BE1] to-[#4C7BE5] text-white rounded-lg" data-game_name="{{ game_info[0] }}" onclick="AddToWishlist(this)">
                    Add to WishList
                </button>
            </a>
            <a href="">
                <button type="button"
                    class="w-full lg:w-[200px] h-[45px] font-bold bg-gradient-to-r from-[#4C7BE1] to-[#4C7BE5] text-white rounded-lg">
                    Read Reviews
                </button>
            </a>
        </div>
       {% if game_info[14]=='0' %}
        <div
            class="relative flex flex-col justify-between items-start mt-10 bg-gradient-to-r from-[#57565F] to-[#57565F] w-full opacity-90 lg:w-[800px] p-6 lg:p-8 shadow-lg rounded-lg mx-auto mb-[5rem]">
            <h1 class="text-lg lg:text-2xl font-bold text-white">{{game_info[0]}}</h1>
            <h1 class="text-lg lg:text-m font-regular text-white italic">               </h1>

            <div
                class="absolute top-[70px] right-[-40px] flex items-center gap-4 bg-black text-white font-bold py-2 px-3 rounded-lg shadow-lg">
                <div class="text-white text-lg">
                    {{game_info[15]}}$
                </div>
                <a href="">
                    <button class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg shadow-md">
                        Add To Cart
                    </button>
                    
                </a>
            </div>
           
        </div>
        {% elif game_info[14]=='1' %}
        <div
    class="relative flex flex-col justify-between items-start mt-10 bg-gradient-to-r from-[#57565F] to-[#57565F] w-full opacity-90 lg:w-[800px] p-6 lg:p-8 shadow-lg rounded-lg mx-auto mb-[5rem]">
    <h1 class="text-lg lg:text-2xl font-bold text-white">{{game_info[0]}}</h1>
    <h1 class="text-lg lg:text-m font-regular text-white italic">Special Offer: offer active for {{game_info[16]}}</h1>

    <!-- Black Box -->
    <div
        class="absolute top-[100px] right-[-60px] flex items-center gap-4 bg-black text-white font-bold py-2 px-4 rounded-lg shadow-lg">
        <!-- Price with Strikethrough and New Price -->
        <div class="flex flex-col items-center">
            <span class="line-through text-gray-400 text-sm">${{game_info[3]}}</span> <!-- Strikethrough Price -->
            <span class="text-white text-lg font-bold">{{game_info[15]}}$</span> <!-- New Price -->
        </div>

        <!-- 10% Discount Badge -->
        <div class="bg-[#335c1b] text-[#3ae310] text-sm font-bold py-1 px-2 rounded-lg shadow-md">
            {{game_info[17]}}%
        </div>

        <!-- Add to Cart Button -->
        <a href="">
            <button class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg shadow-md">
                Add To Cart
            </button>
        </a>
    </div>
</div>
{% endif %}

    </section>

    <script>
        function handleDropdownChange(selectElement) {
            const selectedValue = selectElement.value;
            selectElement.value = ""; // This resets the dropdown to the placeholder option
            
            if (selectedValue === "logout") {
                logout(); // Call the logout function
            } else if (selectedValue === "AddMonitorWallet") {
        
                pass; // changes will be made
        
        
            } else if (selectedValue === "update_pass") {
                showUpdatePasswordModal(); // Redirect to update password page
            }
            else if (selectedValue === "view_profile") {
                window.location.href = '/ViewMyProfile'; // Redirect to update password page
            }
        }
        function AddToWishlist(button){
            const game_name=button.getAttribute('data-game_name')

            fetch('/AddtoWishlist', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ game_name: game_name })
            })
            .then(response => response.json())
            .then(data => {
                if (data.message) {
                    alert(data.message); // Display success message
                    window.location.href ='/ViewGamePage/{{game_info[0]}}'
                    
                } else {
                    alert(data.error); // Display error message
                }
            })
            .catch(error => {
                console.error('Error:', error);
                alert('Something went wrong!');
            });
        }
        function logout() {
            window.location.href = '/logout'; // Redirect to logout route
        }
    </script>
</body>

</html>